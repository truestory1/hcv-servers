{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "forkProcessing": "enabled",
  "extends": [
    "config:recommended",
    "docker:pinDigests",
    "helpers:pinGitHubActionDigests"
  ],

    "customManagers": [
      {
        "customType": "regex",
        "description": "Process annotated dependencies",
        "fileMatch": [
          "(^|/).+\\.ya?ml(?:\\.j2)?$"
        ],
        "matchStrings": [
          "(datasource=(?<datasource>\\S+))? depName=(?<depName>\\S+)( versioning=(?<versioning>.*?))?( repository=(?<registryUrl>\\S+))?\\n.+(:\\s|=)(&\\S+\\s)?(?<currentValue>\\S+)"
        ],
        "datasourceTemplate": "{{#if datasource}}{{{datasource}}}{{else}}git-tags{{/if}}",
        "versioningTemplate": "{{#if versioning}}{{{versioning}}}{{else}}loose{{/if}}"
      }
    ]

}
